var tps=tps||{};tps.slideshowsOnPage=0,tps.createSlideshowDefaults={slideContainer:"",nav:[],navText:"%{currentSlide} of %{totalSlides}",helperText:"",defaultSlide:0,transitionEffect:"none",transitionSpeed:400,keyboardShortcuts:!1,scrollAfterRefresh:!0,numberOfSlides:0,slides:[],useSlideSources:!1,themeType:"classic",prevPost:null,nextPost:null,prevText:null,nextText:null,buttonWidth:0,prevText_post:null,nextText_post:null,buttonWidth_post:0,onShowPost:null,postUrl:null,postId:null,refreshAds:!1,refreshAdsEveryNSlides:1,adRefreshingMechanism:"javascript",ajaxUrl:"/",loopSlides:!1,scrollTopOffset:0,isRtl:!1,excludedWords:[]},tps.createSlideshow=function(e){var t,n,S=this,h=jQuery;for(t in S.options=h.extend(tps.createSlideshowDefaults,e),S.options)if(!isNaN(tps.createSlideshowDefaults[t])&&"string"==typeof S.options[t]){var i=parseFloat(S.options[t]);isNaN(i)||(S.options[t]=i)}if(S.slides=[],S.slideContainer=h(S.options.slideContainer),0==S.slideContainer.length)return null;for(tps.slideshowsOnPage++,S.navEl=[],t=0;t<S.options.nav.length;t++){var o=h(S.options.nav[t]).get();for(n=0;n<o.length;n++)S.navEl.push({container:h(o[n])})}return S.currentPostId=S.options.postId,S.isLoading=!1,S.slidesSinceLastAdRefresh=0,S.remoteLoadingQueue=async.queue(function(e,t){t()},1),S.currentSlide=null,S.currentlyDisplayedSlide=null,S.animations=0,S.semaphore=0,S.asyncQueue=async.queue(function(e,t){t()},1),S.incrementSemaphore=function(){S.asyncQueue.pause(),S.semaphore++},S.decrementSemaphore=function(){S.semaphore--,0==S.semaphore&&S.asyncQueue.resume()},S.init=function(){var e,t,n;for(e in S.loadScrollTop(),S.options.slides)"content"in S.options.slides[e]&&(S.options.useSlideSources&&(S.options.slides[e].source=S.options.slides[e].content),S.options.slides[e].content=h("<div>").html(S.options.slides[e].content)),S.slides[e]=S.options.slides[e];for(S.options.slides=null,S.slideContainer.children(".theiaPostSlider_preloadedSlide").each(function(e,t){e=S.options.defaultSlide+e,t=h(t),S.slides[e]=S.slides[e]||{},S.slides[e].title=document.title,S.slides[e].permalink=document.location.href,S.slides[e].content=t,e!=S.options.defaultSlide&&t.detach()}),S.numberOfSlides=S.options.numberOfSlides,e=0;e<S.navEl.length;e++){var i=S.navEl[e];i.text=i.container.find("._text"),i.prev=i.container.find("._prev").click(function(t){return function(e){t.onNavClick(this,"prev",e)}}(S)),i.next=i.container.find("._next").click(function(t){return function(e){t.onNavClick(this,"next",e)}}(S)),i.title=i.container.find("._title"),0===e&&(S.slides[S.options.defaultSlide].shortCodeTitle=i.title.html()),i.container.find("._prev, ._next").mousedown(function(){h(this).addClass("_active")}).mouseup(function(){h(this).removeClass("_active")})}if(1==S.numberOfSlides||S.options.refreshAds&&"page"==S.options.adRefreshingMechanism&&S.options.refreshAdsEveryNSlides<=1)S.currentSlide=S.options.defaultSlide;else{S.setSlide(S.options.defaultSlide);var o=window.History;o.enabled&&o.Adapter.bind(window,"statechange",(t=S,function(){var e=History.getState();null!=e.data.currentPostId&&(null!=e.data.currentSlide?t.setSlide(e.data.currentSlide):t.setSlide(t.options.defaultSlide))}))}"undefined"!=typeof Hammer&&(S.previousTouch=0,S.minimumTimeBetweenGestures=500,delete Hammer.defaults.cssProps.userSelect,new Hammer(S.slideContainer[0],{inputClass:Hammer.TouchInput}).on("swipeleft",function(){var e=(new Date).getTime();e-S.minimumTimeBetweenGestures>=S.previousTouch&&(S.setNext(),S.previousTouch=e)}).on("swiperight",function(){var e=(new Date).getTime();e-S.minimumTimeBetweenGestures>=S.previousTouch&&(S.setPrev(),S.previousTouch=e)}));S.options.keyboardShortcuts&&h(document).keydown((n=S,function(e){if(1<tps.slideshowsOnPage)return!0;if(this!==e.target&&(/textarea|select/i.test(e.target.nodeName)||"text"===e.target.type||h(e.target).prop&&"true"==h(e.target).prop("contenteditable")))return!0;switch(e.which){case 37:return n.navEl[0].prev[0].click(),!1;case 39:return n.navEl[0].next[0].click(),!1}return!0}))},S.loadSlides=function(e,t){var r,l,d;S.remoteLoadingQueue.push({name:""},(r=S,l=e,d=t,function(e){var t,n,i,o=!0;for(var s in l)if(!(l[s]in r.slides&&"content"in r.slides[l[s]])){o=!1;break}o?d&&d():(r.remoteLoadingQueue.concurrency=0,h.ajax({method:"POST",dataType:"json",data:{action:"tps_get_slides",postId:r.currentPostId,slides:l},url:r.options.ajaxUrl,success:(i=r,function(e){if(e)if(e.postId==i.currentPostId)for(var t in e.slides)for(var n in t in i.slides||(i.slides[t]={}),"content"in e.slides[t]&&(i.options.useSlideSources&&(e.slides[t].source=e.slides[t].content),e.slides[t].content=h("<div>").html(e.slides[t].content)),e.slides[t])i.slides[t][n]=e.slides[t][n];else console.error("Received AJAX results for a different post ID.")}),complete:(t=r,n=d,function(){n&&n(),t.remoteLoadingQueue.concurrency=1,t.remoteLoadingQueue.push({})})}))}))},S.setSlide=function(e,t){if((1!=S.isLoading||1==t)&&S.currentSlide!=e){if(S.needToRefreshPage()&&e in S.slides)return S.saveScrollTop(),void(window.location=S.addQueryString(S.slides[e].permalink));try{h(document).trigger("theiaPostSlider.willChangeSlide",[e])}catch(e){console.error(e)}if(!S.isSlideLoaded(e))return t?void console.error("The slide could not be loaded via AJAX."):(S.showLoading(),void S.loadSlides([e],(n=S,i=e,function(){n.hideLoading(),n.setSlide(i,!0)})));var n,i,o=S.slides[e].source;if(o)for(l=0;l<S.options.excludedWords.length;l++){var s=S.options.excludedWords[l];if("string"==typeof s&&(0!=(s=s.trim()).length&&-1!==o.indexOf(s)))return S.showLoading(),void(window.location=S.addQueryString(S.slides[e].permalink))}var r=S.currentSlide;if(S.currentSlide=e,null!=r){var l,d=S.slideContainer.offset().top;for(l=0;l<S.navEl.length;l++)d=Math.min(d,S.navEl[l].container.offset().top);for(d+=S.options.scrollTopOffset,d=Math.max(0,d),h(window).scrollTop()>d&&h("body,html").animate({scrollTop:d}),l=0;l<S.navEl.length;l++){S.navEl[l].container.removeClass("_slide_number_"+r)}}S.updateTitleText();var a=window.History;if(a.enabled){var c=S.slides[S.currentSlide].permalink,u=document.createElement("a");if(u.href=c,(c=S.addQueryString(window.location.protocol+"//"+window.location.host+u.pathname+u.search)+u.hash)&&null!==r)(c==window.location?a.replaceState:a.pushState)({currentSlide:e,currentPostId:S.currentPostId},S.slides[S.currentSlide].title,c)}if(S.asyncQueue.push({name:""},S.showSlide),S.updateNavigationBars(),!(S.options.refreshAds&&S.slidesSinceLastAdRefresh+1>=S.options.refreshAdsEveryNSlides&&"page"==S.options.adRefreshingMechanism)){var p;p=null==r?1:0==S.currentSlide&&r==S.numberOfSlides-1?1:S.currentSlide==S.numberOfSlides-1&&0==r?-1:(p=S.currentSlide-r,Math.max(Math.min(p,1),-1));var f=S.currentSlide+p;-1==f&&S.options.loopSlides?f=S.numberOfSlides-1:f==S.numberOfSlides&&S.options.loopSlides&&(f=0),0<=f&&f<S.numberOfSlides&&!S.isSlideLoaded(f)&&S.loadSlides([f])}}},S.showSlide=function(){if(S.currentlyDisplayedSlide!=S.currentSlide){if(null!=S.currentlyDisplayedSlide&&S.slides[S.currentSlide].permalink){var e=S.slides[S.currentSlide].permalink.split("/");if(4<=e.length){if(e="/"+e.slice(3).join("/"),"undefined"!=typeof gtag){for(var t="",n=0;n<window.dataLayer.length;n++)if(1<=window.dataLayer[n].length&&"config"===window.dataLayer[n][0]){t=window.dataLayer[n][1];break}gtag("config",t,{page_path:e})}else"undefined"!=typeof _gaq&&void 0!==_gaq.push?_gaq.push(["_trackPageview",e]):"undefined"!=typeof __gaTracker?(__gaTracker("set","page",e),__gaTracker("send","pageview",e)):"undefined"!=typeof ga?(ga("set","page",e),ga("send","pageview",e)):"undefined"!=typeof pageTracker&&void 0!==pageTracker._trackPageview&&pageTracker._trackPageview(e);if("undefined"!=typeof piwikTracker&&void 0!==piwikTracker.trackPageView&&piwikTracker.trackPageView(e),"undefined"!=typeof sc_project&&"undefined"!=typeof sc_security)(new Image).src="//c.statcounter.com/"+sc_project+"/0/"+sc_security+"/1/";if("undefined"!=typeof _qacct)(new Image).src="//pixel.quantserve.com/pixel/"+_qacct+".gif"}}var i=S.currentlyDisplayedSlide;S.currentlyDisplayedSlide=S.currentSlide,S.createSlideContentFromSource(S.slides[S.currentSlide]);var o,s,r=tps.transitions[S.options.transitionEffect](S,i,S.currentlyDisplayedSlide);for(n=0;n<r.length;n++)S.incrementSemaphore();null!==i&&S.asyncQueue.unshift({name:""},(o=S,s=i,function(){o.onRemovedSlide(s)}));for(n=0;n<r.length;n++)r[n]()}},S.createSlideContentFromSource=function(e){!("content"in e)&&"source"in e&&(e.content=h("<div>").html(e.source),0==S.options.useSlideSources&&delete e.source)},S.isSlideLoaded=function(e){return e in S.slides&&((null===S.currentlyDisplayedSlide||!S.options.useSlideSources||"source"in S.slides[e])&&("content"in S.slides[e]||"source"in S.slides[e]))},S.onNewSlide=function(){h(".lazy-hidden").not(".data-lazy-ready").one("scrollin.bj_lazy_load",{distance:200},function(){var e=h(this),t=e.attr("data-lazy-type");"image"==t?e.hide().attr("src",e.attr("data-lazy-src")).removeClass("lazy-hidden").fadeIn():"iframe"==t&&e.replaceWith(c(e.attr("data-lazy-src")))}).addClass("data-lazy-ready");var e=h("body").data("events");if(e&&e["post-load"])for(var t=0;t<e["post-load"].length;t++)"lazy_load_init"==e["post-load"][t].handler.name&&e["post-load"][t].handler();"undefined"!=typeof _wpmejsSettings&&h(".wp-audio-shortcode, .wp-video-shortcode").mediaelementplayer(_wpmejsSettings),"undefined"!=typeof instgrm&&void 0!==instgrm.Embeds&&void 0!==instgrm.Embeds.process&&instgrm.Embeds.process();try{h(document).trigger("theiaPostSlider.changeSlide",[S.currentSlide])}catch(e){console.error(e)}},S.onRemovedSlide=function(e){if(S.options.useSlideSources&&(S.slides[e].content.remove(),delete S.slides[e].content),S.options.refreshAds&&(S.slidesSinceLastAdRefresh++,S.slidesSinceLastAdRefresh>=S.options.refreshAdsEveryNSlides&&(S.slidesSinceLastAdRefresh=0,"javascript"==S.options.adRefreshingMechanism))){var t=null;"undefined"==typeof pubService?"undefined"!=typeof googletag&&"function"==typeof googletag.pubads&&(t=googletag.pubads()):t=pubService,t&&"function"==typeof t.refresh&&t.refresh();try{h(document).trigger("theiaPostSlider.refreshAds")}catch(e){console.error(e)}}},S.updateTitleText=function(){var e=S.slides[S.currentSlide].shortCodeTitle;for(e=e||'<span class="_helper">'+S.options.helperText+"</span>",t=0;t<S.navEl.length;t++)S.navEl[t].title.html(e)},S.updateNavigationBars=function(){for(var e=0;e<S.navEl.length;e++){var t,n=S.navEl[e];t=1==S.numberOfSlides?"":(t=(t=S.options.navText).replace("%{currentSlide}",S.currentSlide+1)).replace("%{totalSlides}",S.numberOfSlides),n.text.html(t),n.container.addClass("_slide_number_"+S.currentSlide),n.container.removeClass("_first_slide _last_slide _middle_slide"),0===S.currentSlide?n.container.addClass("_first_slide"):S.currentSlide===S.numberOfSlides-1?n.container.addClass("_last_slide"):n.container.addClass("_middle_slide"),S.updateNavigationBarButton(n,!1),S.updateNavigationBarButton(n,!0)}},S.updateNavigationBarButton=function(e,t){var n,i,o="",s="",r="",l=t?"next":"prev",d=e[l];"font"==S.options.themeType?(n=0,s=S.options[l+"FontIcon"],0==t?r=S.options.prevText_post&&0==S.currentSlide?S.options.prevText_post:S.options.prevText:o=S.options.nextText_post&&S.currentSlide==S.numberOfSlides-1?S.options.nextText_post:S.options.nextText):(n=S.options.buttonWidth,0==t&&S.options.prevPost&&0==S.currentSlide||1==t&&S.options.nextPost&&S.currentSlide==S.numberOfSlides-1?(s=S.options[l+"Text_post"],i=t?S.options.nextPost:S.options.prevPost):s=S.options[l+"Text"]);var a=null;if(0==t&&S.options.loopSlides&&0==S.currentSlide?a=S.numberOfSlides-1:1==t&&S.options.loopSlides&&S.currentSlide==S.numberOfSlides-1?a=0:0==t&&S.options.prevPost&&0==S.currentSlide||1==t&&S.options.nextPost&&S.currentSlide==S.numberOfSlides-1?(d.addClass("_another_post"),i=t?S.options.nextPost:S.options.prevPost):(d.removeClass("_another_post"),a=S.currentSlide+(t?1:-1)),null!==a)if(S.needToRefreshPage()){var c=S.slides[a];c&&(i=c.permalink)}else i="#";d.find("._1").html(o),d.find("._2").css("width",0<n?n:"").html(s),d.find("._3").html(r),0==t&&null==S.options.prevPost&&!S.options.loopSlides&&0==S.currentSlide||1==t&&null==S.options.nextPost&&!S.options.loopSlides&&S.currentSlide==S.numberOfSlides-1?(d.addClass("_disabled"),i="#"):d.removeClass("_disabled"),d.attr("href",i)},S.onNavClick=function(e,t,n){var i=h(e);if(void 0!==i.attr("href")){if("#"!=i.attr("href")&&""!=i.attr("href"))return S.showLoading(),void S.saveScrollTop();"prev"==t?S.setPrev():S.setNext(),i.focus(),n&&n.preventDefault()}},S.isHtml5StorageAvailable=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},S.saveScrollTop=function(){S.options.scrollAfterRefresh&&S.isHtml5StorageAvailable&&localStorage.setItem("scrollTop",JSON.stringify({postId:S.postId,scrollTop:h(window).scrollTop()}))},S.loadScrollTop=function(){if(S.options.scrollAfterRefresh&&S.isHtml5StorageAvailable){var e=JSON.parse(localStorage.getItem("scrollTop"));if(e&&e.postId==S.postId){var t=Math.min(e.scrollTop,S.slideContainer.offset().top);h(window).scrollTop(t)}localStorage.removeItem("scrollTop")}},S.setPrev=function(){0==S.currentSlide?S.options.loopSlides?S.setSlide(S.numberOfSlides-1):S.options.prevPost&&S.showPost(S.options.prevPost):S.setSlide(S.currentSlide-1)},S.setNext=function(){S.currentSlide==S.numberOfSlides-1?S.options.loopSlides?S.setSlide(0):S.options.nextPost&&S.showPost(S.options.nextPost):S.setSlide(S.currentSlide+1)},S.showPost=function(e){document.location=e},S.setTransition=function(e){var t={effect:S.options.transitionEffect,speed:S.options.transitionSpeed};e=h.extend(t,e),S.options.transitionEffect=e.effect,S.options.transitionSpeed=e.speed},S.setNavText=function(e){S.options.navText=e,S.updateNavigationBars()},S.setTitleText=function(e){for(t=0;t<S.slides.length;t++)S.slides[t].shortCodeTitle="";S.options.helperText=e,S.updateTitleText()},S.showLoading=function(){for(S.isLoading=!0,t=0;t<S.navEl.length;t++)S.navEl[t].container.append(h('<div class="_loading"></div>')).find("._buttons > a").addClass("_disabled")},S.hideLoading=function(){for(S.isLoading=!1,t=0;t<S.navEl.length;t++)S.navEl[t].container.find("._loading").remove();S.updateNavigationBars()},S.needToRefreshPage=function(){return null!==S.currentSlide&&S.options.refreshAds&&S.slidesSinceLastAdRefresh+1>=S.options.refreshAdsEveryNSlides&&"page"==S.options.adRefreshingMechanism},S.addQueryString=function(e){if(!e)return e;if(-1!==document.location.search.indexOf("?p="))return e;var t=document.location.search.substr(1);return t&&(-1===e.indexOf("?")?e+="?"+t:e+="&"+t),e},S.init(),S};
//# sourceMappingURL=sourcemaps/tps.min.js.map
